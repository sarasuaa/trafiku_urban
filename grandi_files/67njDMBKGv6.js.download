;/*FB_PKG_DELIM*/

__d("CometFRXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7163207303747114"}),null);
__d("CometFRXQuery$Parameters",["CometFRXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometFRXQuery_facebookRelayOperation"),metadata:{},name:"CometFRXQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWXPopover.react",["cr:2420","cr:2457","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,c){if(b("cr:2420")!=null)return i.jsx(b("cr:2420"),babelHelpers["extends"]({},a,{ref:c}));return b("cr:2457")!=null?i.jsx(b("cr:2457"),babelHelpers["extends"]({},a,{ref:c})):null}a.displayName=a.name+" [from "+f.id+"]";c=i.forwardRef(a);g["default"]=c}),98);
__d("ReStoreBinaryEncoding",["I64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new TextDecoder(),j=new TextEncoder(),k={true:1,false:2,null:3,undefined:4,emptyString:5,string:6,binary:7,u8binary:8,struct:9,number:10,list:11,i64:12,set:13,map:14},l={boolean:function(a){return a===!0?k.true:k.false},number:function(){return k.number},object:function(a){if(a===null)return k.null;if((h||(h=d("I64"))).isI64(a))return k.i64;if(a instanceof ArrayBuffer)return k.binary;if(a instanceof Uint8Array)return k.u8binary;if(Array.isArray(a))return k.list;if(a instanceof Set)return k.set;return a instanceof Map?k.map:k.struct},string:function(a){return a===""?k.emptyString:k.string},undefined:function(){return k.undefined}};function m(a){return l[typeof a](a)}function n(a,b){a=[a,b];a._tag="i64";return a}var o=j.encodeInto!=null?function(a,b){return j.encodeInto(a,b)}:function(a,b){a=j.encode(a);b.set(a,0);return{written:a.length}};a=function(){function a(){var a=this;this.$1=0;this.$2=[];this.$3=0;this.$4=new DataView(new ArrayBuffer(0));this.$8=function(){a.$3+=a.$5(a.$6());var b=a.$2[a.$3];return b};this.$9=function(){var b=a.$6(),c=a.$4.buffer.slice(a.$4.byteOffset+a.$1,a.$4.byteOffset+b+a.$1);a.$1+=b;return c};this.$10=function(){return new Uint8Array(a.$9(),a.$6(),a.$6())};this.$11=function(){return a.$4.getFloat64((a.$1+=8)-8)};this.$12=function(){var b={},c;while((c=a.$4.getUint8(a.$1++))!==0)b[a.$8()]=a.$13.get(c)();return b};this.$14=function(){var b=[],c;while((c=a.$4.getUint8(a.$1++))!==0)b.push(a.$13.get(c)());return b};this.$15=function(){var b=n(a.$4.getInt32(a.$1),a.$4.getUint32(a.$1+4));a.$1+=8;return b};this.$16=function(){var b=new Set(),c;while((c=a.$4.getUint8(a.$1++))!==0)b.add(a.$13.get(c)());return b};this.$17=function(){var b=new Map(),c;while((c=a.$4.getUint8(a.$1++))!==0)b.set(a.$13.get(a.$4.getUint8(a.$1++))(),a.$13.get(c)());return b};this.$13=new Map([[k.true,function(){return!0}],[k.false,function(){return!1}],[k.null,function(){return null}],[k.undefined,function(){return void 0}],[k.emptyString,function(){return""}],[k.string,this.$8],[k.binary,this.$9],[k.u8binary,this.$10],[k.number,this.$11],[k.struct,this.$12],[k.list,this.$14],[k.i64,this.$15],[k.set,this.$16],[k.map,this.$17]])}var b=a.prototype;b.$5=function(a){return a>>>1^(-(a&1)|0)};b.$6=function(){var a=0,b=!0;for(var d=0;b;d++,this.$1++){if(d>4)throw c("unrecoverableViolation")("expected end of var int","messenger_web_product");var e=this.$4.getUint8(this.$1);b=(e&128)!==0;e=e&-129;a+=e<<7*d}return a};b.$7=function(){this.$1=this.$4.getUint32(0);if(this.$1!==0){while(this.$4.getUint8(this.$1)!==0)this.$2.push(this.$6());this.$1++;var a=this.$4.getUint32(this.$1);a=i.decode(this.$4.buffer.slice(this.$4.byteOffset+this.$1+4,this.$4.byteOffset+a+this.$1+4));var b=0;for(var c=0;c<this.$2.length;c++){var d=this.$2[c];this.$2[c]=a.substr(b,d);b+=d}}this.$1=4};b.decode=function(a){this.$1=0;this.$2=[];this.$3=0;this.$4=new DataView(a.buffer,a.byteOffset,a.byteLength);this.$7();return this.$13.get(this.$4.getUint8(this.$1++))()};return a}();b=function(){function a(){var a=this;this.$1=new ArrayBuffer(65536);this.$2=new Map();this.$3=this.$1;this.$4=new DataView(this.$3);this.$5=4;this.$6=0;this.$7=function(b){if(a.$5+b>a.$3.byteLength){var c=a.$3;a.$3=new ArrayBuffer(Math.max(Math.ceil(a.$3.byteLength*1.5),a.$5+b));new Uint8Array(a.$3).set(new Uint8Array(c));a.$4=new DataView(a.$3)}};this.$9=function(b){b=b;while(b>=128){var c=b&127,d=b>>>7;a.$7(1);a.$4.setUint8(a.$5++,c+128);b=d}a.$7(1);a.$4.setUint8(a.$5++,b)};this.$10=function(){if(a.$2.size>0){a.$4.setUint32(0,a.$5);var b="";for(var c=a.$2.keys(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.$9(f.length);b+=f}a.$7(1+b.length*3+4);a.$4.setUint32(a.$5++,0);f=o(b,new Uint8Array(a.$3,a.$5+4));e=f.written;a.$4.setUint32(a.$5,e);a.$5+=e+4}else a.$7(1),a.$4.setUint32(0,0)};this.$11=function(b){var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d],f=b[e],g=m(f);a.$7(1);a.$4.setUint8(a.$5++,g);a.$12(e);if(g<6)continue;a.$13.get(g)(f)}a.$7(1);a.$4.setUint8(a.$5++,0)};this.$12=function(b){var c=a.$2.get(b);c==null&&a.$2.set(b,c=a.$2.size);a.$9(a.$8(c-a.$6));a.$6=c};this.$14=function(b){a.$9(b.byteLength),a.$7(b.byteLength),new Uint8Array(a.$3).set(new Uint8Array(b),a.$5),a.$5+=b.byteLength};this.$15=function(b){a.$14(b.buffer),a.$9(b.byteOffset),a.$9(b.byteLength)};this.$16=function(b){a.$7(8),a.$4.setFloat64(a.$5,b),a.$5+=8};this.$17=function(b){a.$7(8),a.$4.setInt32(a.$5,b[0]),a.$4.setUint32(a.$5+4,b[1]),a.$5+=8};this.$18=function(b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=m(e);a.$7(1);a.$4.setUint8(a.$5++,f);if(f<6)continue;a.$13.get(f)(e)}a.$7(1);a.$4.setUint8(a.$5++,0)};this.$19=function(b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];var g=m(e);a.$7(1);a.$4.setUint8(a.$5++,g);var h=m(f);a.$7(1);a.$4.setUint8(a.$5++,h);h>5&&a.$13.get(h)(f);if(g<6)continue;a.$13.get(g)(e)}a.$7(1);a.$4.setUint8(a.$5++,0)};this.$13=new Map([[k.struct,this.$11],[k.string,this.$12],[k.binary,this.$14],[k.u8binary,this.$15],[k.number,this.$16],[k.i64,this.$17],[k.list,this.$18],[k.set,this.$18],[k.map,this.$19]])}var b=a.prototype;b.$8=function(a){return a<<1^a>>31};b.encode=function(a){this.$3=this.$1;this.$4=new DataView(this.$3);this.$2=new Map();this.$5=4;this.$6=0;var b=m(a);this.$7(1);this.$4.setUint8(this.$5++,b);b>4&&(this.$13.get(b)(a),this.$10());return new Uint8Array(this.$3,0,this.$5)};return a}();g.Decoder=a;g.Encoder=b}),98);
__d("LSPlatformLockState",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Waiting:"waiting",Acquired:"acquired",Cleaning:"cleaning",Canceled:"canceled"});f.LockState=a}),66);
__d("MessengerLocksManagerFallback",["MWLocalStorageErrorHandler","WebStorageLockManager"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WebStorageLockManager").make(a,{onQuotaExceeded:d("MWLocalStorageErrorHandler").onQuotaExceeded})}g["default"]=a}),98);
__d("ReStoreNameUtils",["CurrentMessengerUser"],(function(a,b,c,d,e,f,g){"use strict";a=d("CurrentMessengerUser").getIDorEIMU();b="RestoreIDBMainLock-"+a;c="dbLock-"+a;e="RestoreConcurrency-"+a;f="lsPlatformLock-"+a;d="syncLock-"+a;a="single-instance-pdb-"+a;g.reStoreCMLockName=b;g.reStoreDBLockName=c;g.restoreConcurrencyBroadcastChannelName=e;g.lsPlatformLockBroadcastChannelName=f;g.lsPlatformLockName=d;g.singleTabLockName=a}),98);
__d("saveHandler",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c={};a.set(c,b);return function(){a["delete"](c)}}f["default"]=a}),66);
__d("LSPlatformSyncLock",["BrowserLockManager","FBLogger","LSPlatformErrorChannel","LSPlatformLockState","LSPlatformLsInitLog","MAWLocalStorage","MWBroadcastChannel","MessengerLocksManagerFallback","MessengerLogHistory","Promise","ReStoreNameUtils","Run","asyncToGeneratorRuntime","clearTimeout","emptyFunction","gkx","justknobx","pageID","promiseDone","saveHandler","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MessengerLogHistory").getInstance("client_init"),j=typeof window!=="undefined"?window:self,k="iwantlock",l="lockRequestOnDemand",m="mw_msgr_mutex";function n(a,e){a===void 0&&(a=j);e===void 0&&(e=function(){return document.hasFocus()});var f=new Map(),g=new Map(),n=d("LSPlatformLockState").LockState.Waiting,o=c("emptyFunction"),p,q=c("gkx")("3890")||c("gkx")("1203")?d("MWBroadcastChannel").MWBroadcastChannel(d("ReStoreNameUtils").lsPlatformLockBroadcastChannelName):void 0,r=function(){if(!c("gkx")("3890"))return;p!=null&&c("clearTimeout")(p);if(n===d("LSPlatformLockState").LockState.Canceled||n===d("LSPlatformLockState").LockState.Acquired)return;p=c("setTimeout")(function(){e()&&n!==d("LSPlatformLockState").LockState.Acquired&&(i.debug("tab has focus and wants to acquire sync lock"),q==null?void 0:q.postMessage(k))},c("justknobx")._("1764"))};function s(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){i.debug("Sync lock acquired"),n=d("LSPlatformLockState").LockState.Acquired,yield (h||(h=b("Promise"))).all(Array.from(f.values()).map(function(a){return a()}))});return t.apply(this,arguments)}function u(){n=d("LSPlatformLockState").LockState.Cleaning,o=c("emptyFunction"),g.forEach(function(a){return a()})}function v(){var b=new AbortController(),f=c("LSPlatformErrorChannel").subscribe(function(e){i.debug("syncLock aborted due to "+e.name),c("FBLogger")("mpf_web_foundations").info("SyncLock aborted due to %s",e.name),o(),b.abort(),n=d("LSPlatformLockState").LockState.Canceled,q==null?void 0:q.removeEventListener("message",g),a.removeEventListener("focus",r),f()}),g=function a(g){if(g==null||g.data==null||(g.data!==k||e())&&g.data!==l)return;i.debug("got message from other tab to abort request to sync lock");o();b.abort();f();q==null?void 0:q.removeEventListener("message",a);n=d("LSPlatformLockState").LockState.Waiting;c("promiseDone")(w())};q==null?void 0:q.addEventListener("message",g);return b}function w(){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,e=(a=c("BrowserLockManager"))!=null?a:c("MessengerLocksManagerFallback")(c("pageID"));if(e){n=d("LSPlatformLockState").LockState.Waiting;d("LSPlatformLsInitLog").addPoint("sync_lock_start");i.debug("Sync lock requested if available");yield new(h||(h=b("Promise")))(function(a){return e.request(d("ReStoreNameUtils").lsPlatformLockName,{ifAvailable:!0},function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){if(c==null){i.debug("Attempted to acquire sync lock but it already taken");d("LSPlatformLsInitLog").addPoint("sync_lock_unavailable");a();return}i.debug("Attempted to acquire sync lock and suceeded");yield s();d("LSPlatformLsInitLog").addPoint("sync_lock_acquired");a();return new(h||(h=b("Promise")))(function(a){o=function(){i.debug("Releasing sync lock"),u(),a()}})});return function(a){return c.apply(this,arguments)}}())});a=v();if(n!==d("LSPlatformLockState").LockState.Acquired){i.debug("Sync lock requested and will wait");d("LSPlatformLsInitLog").addPoint("sync_lock_requests_again");c("promiseDone")(e.request(d("ReStoreNameUtils").lsPlatformLockName,{signal:a.signal},function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){i.debug("Previous attempt to get sync lock failed, getting in queue for when/if it becomes available");yield s();return new(h||(h=b("Promise")))(function(a){o=function(){i.debug("Releasing sync lock"),u(),a()}})});return function(b){return a.apply(this,arguments)}}()),function(a){},function(a){if((a==null?void 0:a.name)==="AbortError")i.debug("Aborting attempt to acquire sync lock");else{d("LSPlatformLsInitLog").addPoint("sync_lock_request_failure");throw a}});if(c("gkx")("1203"))try{a=d("MAWLocalStorage").getStorage();a=a==null?void 0:a.getItem(m);if(a!=null){a=Number(a);var f=Date.now();f-a>=1e3*60*20&&(i.debug("sending lock request on demand"),q==null?void 0:q.postMessage(l))}}catch(a){c("FBLogger")("mpf_web_foundations").catching(a).warn("Failed to send lock request on demand")}}d("LSPlatformLsInitLog").addPoint("lock_requested")}else{d("LSPlatformLsInitLog").addPoint("sync_lock_end_failure");throw c("unrecoverableViolation")("No lock manager inited","messenger_web_product")}});return x.apply(this,arguments)}q!=null&&(a.addEventListener("focus",r),r(),d("LSPlatformLsInitLog").addPoint("onfocus_set"));d("Run").onBeforeUnload(function(){o()},!1);d("LSPlatformLsInitLog").addPoint("beforeunload_set");return{_getStateInternal:function(){return n},hasLock:function(){return n===d("LSPlatformLockState").LockState.Acquired},onAcquired:function(a){return c("saveHandler")(f,a)},onLost:function(a){return c("saveHandler")(g,a)},onLostOnce:function(a){var b=c("saveHandler")(g,function(){a(),b()})},release:function(){o()},requestLock:w}}var o=null;function a(){o==null&&(o=n());return o}function e(){o!=null&&o.release()}g.SYNC_KEY=m;g.init=n;g.use=a;g.releaseIfExist=e}),98);
__d("ReStoreErrorAction",["ClientConsistencyEventEmitter","LSPlatformSyncLock","MAWCurrentUser"],(function(a,b,c,d,e,f,g){"use strict";function a(){switch(d("MAWCurrentUser").getAppID()){case 772021112871879:c("ClientConsistencyEventEmitter").emit("hardRefresh","ls_forced_refresh");break;default:h()}}function h(){c("ClientConsistencyEventEmitter").emit("softRefresh","ls_forced_refresh")}function b(){d("LSPlatformSyncLock").releaseIfExist()}g.refresh=a;g.softRefresh=h;g.stopClient=b}),98);
__d("ReStoreDbVersionChange",["ReStoreErrorAction"],(function(a,b,c,d,e,f,g){"use strict";var h="LS DB changed version",i="ReStoreDbVersionChange";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c=h;b=a.call(this,c)||this;b.message=c;b.name=i;d("ReStoreErrorAction").stopClient();d("ReStoreErrorAction").refresh();return b}return b}(babelHelpers.wrapNativeSuper(Error));g.ERROR_NAME=i;g.ReStoreDbVersionChange=a}),98);
__d("MAWUIThreadCache",["MAWBridgeSendAndReceive","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.threadId;if(i.has(a))return(h||(h=b("Promise"))).resolve(i.get(a));var c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadJidByChatId",{threadId:a}));c!=null&&i.set(a,c);return c});return j.apply(this,arguments)}g.getThreadJidByChatId=a}),98);
__d("LsFalcoEventEntryPoint",[],(function(a,b,c,d,e,f){"use strict";a="message_actions";b="composer";c="icebreaker";f.messageActions=a;f.composer=b;f.icebreaker=c}),66);
__d("MWChatMessageBothOrientationFocusGroup.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","FocusGroup.react","emptyFunction","focusScopeQueries","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");b=d("FocusGroup.react").createFocusGroup(d("focusScopeQueries").tabbableScopeQuery);e=b[0];d=b[1];b={key:c("CometKeys").UP};var k={key:c("CometKeys").DOWN},l={key:c("CometKeys").LEFT},m={key:c("CometKeys").RIGHT},n=[{command:b,description:h._("__JHASH__HYvhkJNYo2M__JHASH__"),handler:c("emptyFunction")},{command:k,description:h._("__JHASH__6tFY25IlnV4__JHASH__"),handler:c("emptyFunction")},{command:l,description:h._("__JHASH__6tFY25IlnV4__JHASH__"),handler:c("emptyFunction")},{command:m,description:h._("__JHASH__HYvhkJNYo2M__JHASH__"),handler:c("emptyFunction")}];function a(a){a=a.children;return j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:n,xstyle:!1,children:a})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.FocusGroup=e;g.FocusGroupItem=d;g.keyCommands=b}),98);
__d("useMWLSDefaultThreadSource",["LSThreadAttributionTypeUtil","react","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useLSMessagingSource")();return i(function(b){return d("LSThreadAttributionTypeUtil").getSource(b,a)},[a])}g["default"]=a}),98);
__d("MWV2LogMessageClick",["I64","LSMessagingThreadTypeUtil","Promise","ReQL","UserAgentData","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("LsMessageClickFalcoEvent").__setRef("MWV2LogMessageClick");function a(a,e,f,g){var k=e.threadKey;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("threads")).getKeyRange(k)).then(function(a){a!=null&&!d("LSMessagingThreadTypeUtil").isSecure(a.threadType)&&j.onReady(function(a){a.log(function(){var a={};g!=null&&(a.action=g);a.browserName=c("UserAgentData").browserName;return{click:{category:2},click_target:{type:f},extra:JSON.stringify(a),message:{id:e.messageId,sender_id:void 0,sent_time:(i||(i=d("I64"))).to_float(e.timestampMs)},thread:{id:i.to_string(e.threadKey),key:void 0,type:void 0},xma:void 0}})});return(h||(h=b("Promise"))).resolve()}))}g.log=a}),98);
__d("useIsMultiReactionEnabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMIsAnyCMThread","MWLSThread","gkx"],(function(a,b,c,d,e,f,g){"use strict";b=20;function a(a){return(a=d("MWLSThread").useThread(a,function(a){if(!d("LSThreadBitOffset").has(156,a))return!1;if(c("MWCMIsAnyCMThread")(a.threadType))return c("gkx")("8266");if(d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType))return c("gkx")("10657")}))!=null?a:!1}g.MAX_REACTION_COUNT=b;g.useIsMultiReactEnabled=a}),98);
__d("MWLSIndexedDBConfigStore",["gkx","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="name";d="main";e="dbCorruption";f=c("gkx")("4463");var i=c("justknobx")._("347");function j(a){a=a.objectStoreNames;return a.contains("_db_config")}function a(){return 8}var k=babelHelpers["extends"]({fullColumnNames:!0,localVersion:i,lockVersion:a(),name:d,reStoreVaulting:f},c("gkx")("9005")?{lockStealing:!0}:{});function b(a,b){b===void 0&&(b={});if(j(a))return;a=a.createObjectStore("_db_config",{autoIncrement:!0,keyPath:h});a.createIndex(h,h,{unique:!0});b=babelHelpers["extends"]({},k,b);a.add(b);a.put({name:"epoch",value:c("uuidv4")()})}g.dbConfigKey=d;g.dbCorruptionFailuresKey=e;g.currentConfig=k;g.createDbConfig=b}),98);
__d("CometFRX.entrypoint",["CometFRXQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.conformed_interface_override,e=a.entryPoint,f=a.id,g=a.location;a=a.responsible_id;return{queries:{frx:{parameters:c("CometFRXQuery$Parameters"),variables:{input:{conformed_interface_override:b,entry_point:e,id:f,location:g,responsible_id:a},scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("CometFRX.react").__setRef("CometFRX.entrypoint")};g["default"]=a}),98);
__d("LsMessageActionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2051889");b=d("FalcoLoggerInternal").create("ls_message_action",a);e=b;g["default"]=e}),98);
__d("useIsSecureMessage",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e;e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("threads"),["threadType"]).getKeyRange(b.threadKey).map(function(a){a=a.threadType;return a})},[a,b.threadKey],f.id+":36"))!=null?e:c.fallbackThreadType;if(e==null){return(c=c.fallbackIsSecure)!=null?c:!1}return d("LSMessagingThreadTypeUtil").isSecure(e)}g["default"]=a}),98);
__d("LSGetIfViewerIsWorkplaceUser",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1];b.n;var d=[];return d[0]=c("gkx")("7530"),b.resolve(d)}b=a;g["default"]=b}),98);
__d("LSDeleteMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(12).fetch([[[a[0]]]]),function(c){return c.messageId===a[1]&&b.i64.eq(c.threadKey,a[0])}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSGetThreadParticipantDisplayName",["LSGetIfViewerIsWorkplaceUser"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(a){return c.sp(b("LSGetIfViewerIsWorkplaceUser")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return d[0]?c.seq([function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,2352696798]),f).then(function(a){return d[4]=a})},function(a){return d[2]=d[4]}]):(b=a.item,d[2]=b.name)})},function(a){return d[1]=d[2]}]):c.seq([function(b){return c.ftr(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[1])}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[2]=f:(b=a.item,d[2]=b.nickname)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[1]]]]),function(b){return c.i64.eq(b.id,a[1])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?c.seq([function(a){return c.localizeV2Async(c.i64.cast([0,14617150]),f).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}]):(b=a.item,d[4]=b.firstName==null?b.name:b.firstName)})},function(a){return d[1]=d[2]==null?d[4]:d[2]}])},function(a){return e[0]=d[1]}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSMoveThreadToInboxAndUpdateParent",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({folderName:"inbox",parentThreadKey:a[1]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSSetPinnedMessage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("pinned_message_state",a[3]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"set_pinned_message_search",c.i64.cast([0,751]),d[1],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.i64.eq(a[3],c.i64.cast([0,1]))?c.seq([function(b){return c.fe(c.db.table(205).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})},function(b){return c.fe(c.ftr(c.db.table(205).fetch([[[a[0],a[1],a[2]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&b.messageId===a[1]&&c.i64.eq(b.pinnedTimestampMs,a[2])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(b){return c.db.table(205).add({threadKey:a[0],messageId:a[1],pinnedTimestampMs:a[2],authorityLevel:c.i64.cast([0,80])})}]):c.fe(c.db.table(205).fetch([[[a[0],a[1]]]]),function(a){return a["delete"]()})}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSUpdateMessageSubThreadKey",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.db.table(12).fetch([[[a[0]]],"messageId"]),function(b){var c=b.update;b.item;return c({subthreadKey:a[1]})})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSUpdateOrInsertReactionV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(d){return b.db.table(226).fetch([[[a[0],a[1],a[2]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(12).fetch([[[a[1]]],"messageId"]).next().then(function(d,e){var c=d.done;d=d.value;return c?0:(e=d.item,b.seq([function(c){return b.fe(b.ftr(b.db.table(226).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.reactionFbid,a[2])&&b.i64.lt(c.authorityLevel,a[5])}),function(a){return a["delete"]()})},function(c){return b.db.table(226).add({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.timestampMs,authorityLevel:a[5],count:a[4],viewerIsReactor:a[6],viewerReactionTimestampMs:a[7],lastUpdatedTimestampMs:a[8]})}]))}):(e=d.item,c[2]=e.lastUpdatedTimestampMs,c[1]=e.authorityLevel,b.i64.eq(a[5],b.i64.cast([0,20]))||b.i64.eq(c[1],b.i64.cast([0,80]))&&b.i64.eq(a[5],b.i64.cast([0,80]))||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(b.i64.add(c[2],b.i64.cast([0,2e3])),a[8])||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,60]))||b.i64.eq(c[1],b.i64.cast([0,60]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(c[2],a[8])?c[3]=!0:c[3]=!1,c[3]?b.db.table(226).put({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.messageTimestamp,reactionLiteral:a[3],count:a[4],authorityLevel:a[5],viewerIsReactor:a[6],viewerReactionTimestampMs:b.i64.cast([0,0]),lastUpdatedTimestampMs:a[8]}):b.resolve())})},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSUpsertReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(8).put({threadKey:a[0],messageId:a[2],actorId:a[3],timestampMs:a[1],reaction:a[4],authorityLevel:a[5],reactionCreationTimestampMs:a[6]})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);